<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Print Catalog</title>
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<script>
function load_top_listing(){
	$("#content").load("list.html", ()=>{
    $("a.category,a.subcategory,a.item").click((e)=>{
      e.preventDefault();
      load_new_listing(e.currentTarget.href)
    })
    $("a.breadcrumb").click((e)=>{
      e.preventDefault();
      load_new_listing(e.currentTarget.href,"reverse")
    })
  })
}
function load_new_listing(path,dir=""){
	$("#main").append('<div id="loader"></div>')
  if(dir=="reverse"){
    $("#loader").css({left:"-100vw"})
  }
	$("#loader").load(path, function( response, status, xhr ) {
    if ( status == "error" ) {
      console.log([response, status, xhr]);
    } else {
      $("a.category,a.subcategory,a.item").click((e)=>{
        e.preventDefault();
        load_new_listing(e.currentTarget.href)
      })
      $("a.breadcrumb").click((e)=>{
        e.preventDefault();
        load_new_listing(e.currentTarget.href,"reverse")
      })
      $("a.subitem").click((e)=>{
        if(!confirm('Get print file for "'+e.currentTarget.title+'"?')){
          e.preventDefault();
        }
      })
      $("#loader").animate({left:"10vw"},"slow", ()=>{
        $("#content").remove();
        $("#loader").attr("id", "content");
      })
    }
  });
}


$(document).ready(function(){
  console.log("loading top listing")
  load_top_listing();
})

	</script>
  <style>
    :root{
      --c-line: #99f;
      --c-panelbg: #ccf;

    }
    body{
      font-family: sans-serif;
    }
    h1{
      text-align: center;
      font-family: sans-serif;
    }
    #main{
      width: 80vw;
      margin: auto;
      overflow-x: hidden;
    }
    #content,#loader{
      position: absolute;
      top:auto;
      left: 10vw;
      width: calc(80vw - 4em - 2px);
      vertical-align: top;
      text-align: center;
      padding: 2em;
      background: var(--c-panelbg);
      border: 1px solid blue;
      border-radius: 1em;
    }
    div#loader{
      left:100vw;
    }
    a.listing{
      display: inline-block;
      border: 1px solid var(--c-line);
      border-radius: 1em;
      text-align: center;
      overflow: hidden;
      margin: 1em 1em 1em 1em;
      text-decoration: none;
      color: black;
      font-family: sans-serif;
    }


    div[class$=list] :is(img,embed){
      width: 15em;
      height: 15em;
      aspect-ratio: 1 / 1;
      object-fit: contain;
      display: block;
      margin: auto;
      vertical-align: top;
      pointer-events: none;
    }
   div.subitemlist img{
      width: 25em;
      height: 25em;
      aspect-ratio: 1 / 1;
      object-fit: cover;
    }
    .subitemlist a span{
      text-align: left;
      line-height: 130%;
    }
    div[class$=list] a span{
      display: block;
      padding: 0.5em 1em 0.5em 1em;
      width: calc(100% - 2em);
    }
    div[class$=list] a span::first-line{
      font-weight: bold;
    }
    a.breadcrumb:first-of-type::before{
      content: "⤺";
      display: inline-block;
      width: 0;
      margin-right: 1.5em;
    }
    a.breadcrumb::before{
      content: "➤";
      display: inline-block;
      width:0;
      margin-right:1.5em;
      margin-left: 0.5em;
    }
    .filterbutton > input{
      display: none;
    }
    .filterbutton{
      display: inline-block;
      border: 1px solid grey;
      padding: 1em;
      margin: 0.5em;
      border-radius: 1.5em;      
      background: lightgrey;
      color: grey;
    }
    .filterbutton:has(:checked){
      border-color: var(--c-line);
      background: var(--c-panelbg);
      color: black;
    }
    a.listing{
      display: none;
    }
    body:has(.filterbutton>input[class~="MK3S_0.4"]:checked)   a.listing[data-tags~="MK3S_0.4"],
    body:has(.filterbutton>input[class~="MK3S_0.6"]:checked)   a.listing[data-tags~="MK3S_0.6"],
    body:has(.filterbutton>input[class~="MK4S_HF0.4"]:checked) a.listing[data-tags~="MK4S_HF0.4"]
    {
      display: inline-block;
    }

    body:has(.filterbutton>input[class~="2_color"]:checked) a.listing:not([data-tags~="2_color"]),
    body:has(.filterbutton>input[class~="large"]:checked)   a.listing:not([data-tags~="large"])
    {
      display: none;
    }

  </style>
</head>
<body class="">
<h1>Member Print Catalog</h1>
<div id=filters>
  Printers:
  <label for=filter-printer-all class=filterbutton>
    <input name=printer type=radio id=filter-printer-all class="MK3S_0.4 MK3S_0.6 MK4S_HF0.4">
    All Printers
  </label>
  <label for=filter-printer-MK3S_0.4 class=filterbutton>
    <input name=printer type=radio id=filter-printer-MK3S_0.4 class=MK3S_0.4 checked>
    Printer: MK3S 0.4
  </label>
  <label for=filter-printer-MK3S_0.6 class=filterbutton>
    <input name=printer type=radio id=filter-printer-MK3S_0.6 class=MK3S_0.6>
    Printer: MK3S 0.6 (Turbo)
  </label>
  <label for=filter-printer-MK4S_HF0.4 class=filterbutton>
    <input name=printer type=radio id=filter-printer-MK4S_HF0.4 class=MK4S_HF0.4>
    Printer: MK4S 0.4
  </label>
  <br>
  Tags:
  <label for=filter-tag-2_color class=filterbutton>
    <input type=checkbox id=filter-tag-2_color class=2_color>
    2 Colors
  </label>
  <label for=filter-tag-large class=filterbutton>
    <input type=checkbox id=filter-tag-large class=large>
    Large
  </label>
</div>
<div id=main>
	<div id=content>
	</div>
</div>
</body>
</html>